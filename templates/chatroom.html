<!DOCTYPE html>
<html>
<head>
    <title>Chatroom - {{ chatroom_id }}</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.js"></script>
    <script>
        var socket = io();
    
        function sendMessage() {
            var messageInput = document.getElementById('message_input');
            var message = messageInput.value.trim();
            if (message !== '') {
                socket.emit('message', {
                    username: "{{ username }}",
                    message: message
                });
                messageInput.value = '';
            }
        }
    
        function handleKeyPress(event) {
            if (event.keyCode === 13) {
                sendMessage();
            }
        }
    
        socket.on('message', function(data){
            var chatbox = document.getElementById('chatbox');
            var messageElement = document.createElement('div');
            messageElement.textContent = data.username + ': ' + data.message; // Construct message here
            chatbox.appendChild(messageElement);
        });
    </script>
    
</head>
<body>
    <h1>Chatroom - {{ chatroom_id }}</h1>
    <button onclick="location.href='/logout'">Logout</button>
    <div id="chatbox" style="height: 300px; overflow-y: scroll;"></div>
    <input id="message_input" type="text" onkeypress="handleKeyPress(event)">
    <button onclick="sendMessage()">Send</button>
</body>
</html>
